var MentionMe=(function(c,b){var a=false,f=null,e=null;function j(){var k,l=Cookie.get("multi_mention");if(l){k=l.split("|");c(k).each(function(){if(c("#multi_mention_link_"+this).length){c("#multi_mention_link_"+this).addClass("postbit_multimention_on")}});if(c("#quickreply_multi_mention").length){c("#quickreply_multi_mention").show()}}if(typeof CKEDITOR!=="undefined"&&typeof CKEDITOR.instances!=="undefined"&&typeof CKEDITOR.instances.message==="object"){f=CKEDITOR.instances.message;a=true}else{if(c("#message").length){e=c("#message")}}return}function g(m){var n,o=new Array(),p=Cookie.get("multi_mention"),l=true,k;if(p){k=p.split("|");c(k).each(function(){if(this!=m&&this!=""){o[o.length]=this}else{if(this==m){l=false}}})}if(l==true){o[o.length]=m}if(c("#multi_mention_link_"+m).length){n=c("#multi_mention_link_"+m);if(l==true){n.removeClass("postbit_multimention");n.addClass("postbit_multimention_on")}else{n.removeClass("postbit_multimention_on");n.addClass("postbit_multimention")}}if(c("#quickreply_multi_mention")){if(o.length>0){c("#quickreply_multi_mention").show()}else{c("#quickreply_multi_mention").hide()}}Cookie.set("multi_mention",o.join("|"))}function h(){if(use_xmlhttprequest==1){c.ajax({type:"get",url:"xmlhttp.php",data:{action:"mentionme",mode:"getMultiMentioned",load_all:1},success:i});return false}return true}function i(l){var k;if(l.match(/<error>(.*)<\/error>/)){k=l.match(/<error>(.*)<\/error>/);if(!k[1]){k[1]="An unknown error occurred."}c.jGrowl("There was an error fetching the posts.\n\n"+k[1],{theme:"jgrowl_error"})}else{if(l){if(a){if(f.getData()){l="\n"+l}f.insertText(l)}else{if(e.val()){e.val(e.val()+"\n")}e.val(e.val()+l)}}}d();c("#quickreply_multi_mention").hide();c("#mentioned_ids").val("all");if(a){f.focus()}else{e.focus()}}function d(){var l,k,m=Cookie.get("multi_mention");c("#quickreply_multi_mention").hide();if(m){k=m.split("|");c(k).each(function(){if(c("#multi_mention_link_"+this).length){l=c("#multi_mention_link_"+this);l.removeClass("postbit_multimention_on");l.addClass("postbit_multimention")}})}Cookie.unset("multi_mention")}b.multi={init:j,load:h,clear:d,mention:g};c(j);return b})(jQuery,MentionMe||{});