var tylDataList=new Array,tylExpIds=new Array,thankyoulike={init:function(){$("[id^='tyl_data_']").each(function(){tylDataList.push(parseInt($(this).attr("id").match(/\d+/)),10)}),tylExpIds=(tylExpIds=Cookie.get("tylexpids"))?$.uniqueSort(tylExpIds.split(/,/).map(function(t){return parseInt(t,10)})):new Array,$(tylExpIds).filter(tylDataList);var t=0;for(t=0;t<tylDataList.length;++t)-1!==$.inArray(tylDataList[t],tylExpIds)?thankyoulike.display(tylDataList[t]):thankyoulike.fleece(tylDataList[t])},tgl:function(t){1==tylCollapsible&&($("#tyl_data_"+t).is(":visible")?(thankyoulike.fleece(t),tylExpIds=$.grep(tylExpIds,function(l){return l!=t})):(thankyoulike.display(t),tylExpIds.push(t)),Cookie.set("tylexpids",tylExpIds.join(",")))},fleece:function(t){$("#tyl_data_"+t+",#tyl_title_"+t).hide(),$("#tyl_title_collapsed_"+t).show(),$("#tyl_i_expcol_"+t).attr("src")&&$("#tyl_i_expcol_"+t).attr("src",$("#tyl_i_expcol_"+t).attr("src").replace("collapse.png","collapse_collapsed.png")),$("#tyl_i_expcol_"+t).attr("alt","[+]"),$("#tyl_a_expcol_"+t).attr("title","[+]")},display:function(t){$("#tyl_data_"+t+",#tyl_title_"+t).show(),$("#tyl_title_collapsed_"+t).hide(),$("#tyl_i_expcol_"+t).attr("src")&&$("#tyl_i_expcol_"+t).attr("src",$("#tyl_i_expcol_"+t).attr("src").replace("collapse_collapsed.png","collapse.png")),$("#tyl_i_expcol_"+t).attr("alt","[-]"),$("#tyl_a_expcol_"+t).attr("title","[-]")},add:function(t){return 1!=use_xmlhttprequest||1!=tylEnabled||(0==tylUser||($.ajax("thankyoulike.php?ajax=1&action=add&pid="+t+"&my_post_key="+my_post_key,{type:"post",success:function(l){thankyoulike.addDone(l,t)}}),document.body.style.cursor="wait",!1))},addDone:function(t,l){if("string"==typeof t){var e=$.parseJSON(t);e&&(1==tylDisplayGrowl?$.jGrowl(e,{theme:"jgrowl_error"}):alert(e)),document.body.style.cursor="default"}else if(t.errors)$.jGrowl(t.errors.join(" "),{theme:"jgrowl_error"});else{if(1==tylDisplayGrowl){var o=tylSend,r={theme:"jgrowl_success"};t.tylMsgNumLeft&&(o+="<br />\n<br />\n"+t.tylMsgNumLeft,t.tylMsgLife&&(r.life=t.tylMsgLife)),$.jGrowl(o,r)}$("#tyl_"+l).html(t.tylData),$("#tyl_"+l).css("display",""),$("#tyl_btn_"+l).before(t.tylButton).remove()}document.body.style.cursor="default"},del:function(t){return 1!=use_xmlhttprequest||1!=tylEnabled||(0==tylUser||($.ajax("thankyoulike.php?ajax=1&action=del&pid="+t+"&my_post_key="+my_post_key,{type:"post",success:function(l){thankyoulike.delDone(l,t)}}),document.body.style.cursor="wait",!1))},delDone:function(t,l){if("string"==typeof t){var e=$.parseJSON(t);e&&(1==tylDisplayGrowl?$.jGrowl(e,{theme:"jgrowl_error"}):alert(e)),document.body.style.cursor="default"}else t.errors?$.jGrowl(t.errors.join(" "),{theme:"jgrowl_error"}):(1==tylDisplayGrowl&&$.jGrowl(tylRemove,{theme:"jgrowl_success"}),$("#tyl_"+l).html(t.tylData),$("#tyl_"+l).css("display",""),$("#tyl_btn_"+l).before(t.tylButton).remove());document.body.style.cursor="default"}};$(function(){thankyoulike.init()});